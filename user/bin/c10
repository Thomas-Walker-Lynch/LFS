#!/bin/bash

if [[ "$LFS_ENV" != "m2" ]];then
  echo $(basename "$0") "must be run in env_m2"
  exit 1
fi

s10.2_fstab

if [[ "$LFS_LFS_BOOT_STYLE" != "UEFI" ]];then
  frame env_source linux efi_s10_linux
else
  frame env_source linux s10_linux
fi

# 
s10.3.2_module_load_order

# s10.4 book proposes to make a rescue copy of the boot record.  This could save
# us if we have the wrong device in the configuration, perhaps the build machine's
# device. (But then where do we store it? Probably need a config variable for
# this) Or, if the target media is already bootable and we mess that up.  But this
# requires getting some software from BLF, so I will leave this for later.
#
# s10.4.1_copy_boot_rec

s10.4.3_grub_install
