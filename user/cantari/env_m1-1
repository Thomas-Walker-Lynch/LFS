#!/bin/bash
# bash without -i resets PS1
# except for the log file variables this comes from section 4.4
#set -x

script="$@"

# according to the book	   
umask 022
export LC_ALL=POSIX
export LFS_TGT="$(uname -m)-lfs-linux-gnu"
export PATH="/usr/bin"
if [ ! -L /bin ]; then 
  PATH=/bin:"$PATH"
fi	 
PATH="$LFS_M2_FS/tools/bin":"$PATH"
PATH="$REPO_USER_DIR/cantari":/user/local/bin:"$PATH"
export CONFIG_SITE="$LFS_M2_FS/usr/share/config.site"

# for our build scripts
source "$REPO_DIR/activate"
PATH="$REPO_USER_DIR/cantari":/usr/local/bin:"$PATH"
source "$REPO_USER_DIR/build/configuration"

# These values to be used in the m2 environment for REPO_HOME etc.
export LFSM2_REPO_HOME="/mnt"
export LFSM2_REPO_DIR="$LFSM2_REPO_HOME/$REPO"
export LFSM2_REPO_USER_DIR="$LFSM2_REPO_DIR/user"


$script
#set +x
